<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Trading Model Architecture</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f8f8f8;
      margin: 0;
      padding: 20px;
      color: #333;
    }
    
    h1 {
      text-align: center;
      color: #333;
      margin-bottom: 30px;
    }
    
    .diagram-container {
      background-color: white;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      padding: 20px;
      margin: 0 auto 30px;
      max-width: 1200px;
    }
    
    .diagram {
      width: 100%;
      height: auto;
      display: block;
    }
  </style>
</head>
<body>
  <h1>Trading Model Architecture</h1>

  <div class="diagram-container">
    <svg
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 1200 600"
      class="diagram"
    >
      <!-- Background - light gray -->
      <rect
        x="0"
        y="0"
        width="1200"
        height="600"
        fill="#f5f5f5"
      />

      <!-- Stage 1 container -->
      <rect
        x="20"
        y="20"
        width="360"
        height="560"
        fill="#ffffff"
        stroke="#333333"
        stroke-width="2"
        rx="5"
        ry="5"
      />
      <text
        x="200"
        y="50"
        font-family="Arial"
        font-size="18"
        font-weight="bold"
        text-anchor="middle"
      >
        Stage 1: Supervised Fine-Tuning
      </text>

      <!-- Stage 1 boxes -->
      <!-- Box A1 -->
      <rect
        x="60"
        y="80"
        width="280"
        height="80"
        fill="#eeeeee"
        stroke="#555555"
        stroke-width="1.5"
        rx="3"
        ry="3"
      />
      <text
        x="200"
        y="110"
        font-family="Arial"
        font-size="16"
        fill="#333333"
        text-anchor="middle"
        font-weight="bold"
      >
        Data Collection
      </text>
      <text
        x="200"
        y="135"
        font-family="Arial"
        font-size="14"
        fill="#555555"
        text-anchor="middle"
      >
        GIR, Market, News
      </text>

      <!-- Box A2 -->
      <rect
        x="60"
        y="190"
        width="280"
        height="80"
        fill="#eeeeee"
        stroke="#555555"
        stroke-width="1.5"
        rx="3"
        ry="3"
      />
      <text
        x="200"
        y="220"
        font-family="Arial"
        font-size="16"
        fill="#333333"
        text-anchor="middle"
        font-weight="bold"
      >
        Reasoning Trajectory Generation
      </text>
      <text
        x="200"
        y="245"
        font-family="Arial"
        font-size="14"
        fill="#555555"
        text-anchor="middle"
      >
        Synthetic Chain-of-Thought
      </text>

      <!-- Box A3 -->
      <rect
        x="60"
        y="300"
        width="280"
        height="80"
        fill="#eeeeee"
        stroke="#555555"
        stroke-width="1.5"
        rx="3"
        ry="3"
      />
      <text
        x="200"
        y="330"
        font-family="Arial"
        font-size="16"
        fill="#333333"
        text-anchor="middle"
        font-weight="bold"
      >
        Trajectory Evaluation & Selection
      </text>
      <text
        x="200"
        y="355"
        font-family="Arial"
        font-size="14"
        fill="#555555"
        text-anchor="middle"
      >
        Quality Assessment
      </text>

      <!-- Box A4 -->
      <rect
        x="60"
        y="410"
        width="280"
        height="80"
        fill="#eeeeee"
        stroke="#555555"
        stroke-width="1.5"
        rx="3"
        ry="3"
      />
      <text
        x="200"
        y="440"
        font-family="Arial"
        font-size="16"
        fill="#333333"
        text-anchor="middle"
        font-weight="bold"
      >
        Model Fine-Tuning
      </text>
      <text
        x="200"
        y="465"
        font-family="Arial"
        font-size="14"
        fill="#555555"
        text-anchor="middle"
      >
        Optimize Reasoning
      </text>

      <!-- Stage 1 arrows -->
      <!-- Arrow A1 -> A2 -->
      <line x1="200" y1="160" x2="200" y2="190" stroke="#333333" stroke-width="2" />
      <polygon points="200,190 195,180 205,180" fill="#333333" />

      <!-- Arrow A2 -> A3 -->
      <line x1="200" y1="270" x2="200" y2="300" stroke="#333333" stroke-width="2" />
      <polygon points="200,300 195,290 205,290" fill="#333333" />

      <!-- Arrow A3 -> A4 -->
      <line x1="200" y1="380" x2="200" y2="410" stroke="#333333" stroke-width="2" />
      <polygon points="200,410 195,400 205,400" fill="#333333" />

      <!-- Stage 2 container -->
      <rect
        x="420"
        y="20"
        width="600"
        height="560"
        fill="#ffffff"
        stroke="#333333"
        stroke-width="2"
        rx="5"
        ry="5"
      />
      <text
        x="720"
        y="50"
        font-family="Arial"
        font-size="18"
        font-weight="bold"
        text-anchor="middle"
      >
        Stage 2: Reinforcement Learning
      </text>

      <!-- Stage 2 boxes -->
      <!-- B1 -->
      <rect
        x="600"
        y="80"
        width="240"
        height="70"
        fill="#eeeeee"
        stroke="#555555"
        stroke-width="1.5"
        rx="3"
        ry="3"
      />
      <text
        x="720"
        y="110"
        font-family="Arial"
        font-size="16"
        fill="#333333"
        text-anchor="middle"
        font-weight="bold"
      >
        Event-Driven RL Environment
      </text>
      <text
        x="720"
        y="135"
        font-family="Arial"
        font-size="14"
        fill="#555555"
        text-anchor="middle"
      >
        News & Market Events Intake
      </text>
      
      <!-- B2 -->
      <rect
        x="600"
        y="190"
        width="240"
        height="70"
        fill="#eeeeee"
        stroke="#555555"
        stroke-width="1.5"
        rx="3"
        ry="3"
      />
      <text
        x="720"
        y="225"
        font-family="Arial"
        font-size="16"
        fill="#333333"
        text-anchor="middle"
        font-weight="bold"
      >
        PPO/GRPO Training
      </text>

      <!-- Reward Functions container -->
      <rect
        x="520"
        y="300"
        width="400"
        height="130"
        fill="#f0f0f0"
        stroke="#666666"
        stroke-width="1.5"
        rx="3"
        ry="3"
      />
      <text
        x="720"
        y="330"
        font-family="Arial"
        font-size="18"
        fill="#333333"
        text-anchor="middle"
        font-weight="bold"
      >
        Reward Functions
      </text>

      <!-- Reward boxes -->
      <rect
        x="535"
        y="350"
        width="110"
        height="60"
        fill="#e0e0e0"
        stroke="#666666"
        stroke-width="1"
        rx="3"
        ry="3"
      />
      <text
        x="590"
        y="385"
        font-family="Arial"
        font-size="15"
        fill="#333333"
        text-anchor="middle"
        font-weight="bold"
      >
        Format
      </text>

      <rect
        x="655"
        y="350"
        width="110"
        height="60"
        fill="#e0e0e0"
        stroke="#666666"
        stroke-width="1"
        rx="3"
        ry="3"
      />
      <text
        x="710"
        y="385"
        font-family="Arial"
        font-size="15"
        fill="#333333"
        text-anchor="middle"
        font-weight="bold"
      >
        Return
      </text>

      <rect
        x="775"
        y="350"
        width="110"
        height="60"
        fill="#e0e0e0"
        stroke="#666666"
        stroke-width="1"
        rx="3"
        ry="3"
      />
      <text
        x="830"
        y="385"
        font-family="Arial"
        font-size="15"
        fill="#333333"
        text-anchor="middle"
        font-weight="bold"
      >
        Penalize
      </text>

      <!-- Output box (B3) -->
      <rect
        x="600"
        y="470"
        width="240"
        height="70"
        fill="#eeeeee"
        stroke="#555555"
        stroke-width="1.5"
        rx="3"
        ry="3"
      />
      <text
        x="720"
        y="500"
        font-family="Arial"
        font-size="16"
        fill="#333333"
        text-anchor="middle"
        font-weight="bold"
      >
        Trading Decision Output
      </text>
      <text
        x="720"
        y="525"
        font-family="Arial"
        font-size="14"
        fill="#555555"
        text-anchor="middle"
      >
        Portfolio Weights
      </text>

      <!-- Stage 2 arrows -->
      <!-- Arrow B1 -> B2 -->
      <line x1="720" y1="150" x2="720" y2="190" stroke="#333333" stroke-width="2" />
      <polygon points="720,190 715,180 725,180" fill="#333333" />

      <!-- Arrow B2 -> Reward Functions -->
      <line x1="720" y1="260" x2="720" y2="300" stroke="#333333" stroke-width="2" />
      <polygon points="720,300 715,290 725,290" fill="#333333" />

      <!-- Arrow Reward Functions -> Output -->
      <line x1="720" y1="430" x2="720" y2="470" stroke="#333333" stroke-width="2" />
      <polygon points="720,470 715,460 725,460" fill="#333333" />

      <!-- Connection between stages -->
      <line x1="340" y1="300" x2="420" y2="300" stroke="#333333" stroke-width="2.5" />
      <polygon points="420,300 410,295 410,305" fill="#333333" />
    </svg>
  </div>
</body>
</html>