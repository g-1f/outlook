<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trading Model Architecture</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f5f5f5;
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        h1 {
            color: #333;
            margin-bottom: 30px;
        }
        .diagram-container {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            padding: 20px;
            margin-bottom: 30px;
            max-width: 1000px;
            width: 100%;
        }
        .diagram {
            width: 100%;
            height: auto;
        }
        .description {
            max-width: 800px;
            line-height: 1.6;
            color: #444;
        }
        .footer {
            margin-top: 30px;
            color: #777;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <h1>Trading Model Architecture</h1>
    
    <div class="diagram-container">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 500" class="diagram">
            <!-- Background -->
            <rect x="0" y="0" width="1000" height="500" fill="#e0f2f1" opacity="0.3"/>
            
            <!-- Stage 1 container -->
            <rect x="20" y="20" width="300" height="460" fill="#f9f9f9" stroke="#333" stroke-width="2" rx="5" ry="5"/>
            <text x="170" y="45" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle">Stage 1: Supervised Fine-Tuning</text>
            
            <!-- Stage 1 boxes -->
            <rect x="50" y="60" width="240" height="80" fill="#e1f5fe" stroke="#0288d1" stroke-width="1.5" rx="3" ry="3"/>
            <text x="170" y="95" font-family="Arial" font-size="14" fill="#01579b" text-anchor="middle">Data Collection</text>
            <text x="170" y="115" font-family="Arial" font-size="12" fill="#01579b" text-anchor="middle">GIR, Market, News</text>
            
            <rect x="50" y="180" width="240" height="80" fill="#e1f5fe" stroke="#0288d1" stroke-width="1.5" rx="3" ry="3"/>
            <text x="170" y="205" font-family="Arial" font-size="14" fill="#01579b" text-anchor="middle">Reasoning Trajectory</text>
            <text x="170" y="225" font-family="Arial" font-size="14" fill="#01579b" text-anchor="middle">Generation</text>
            <text x="170" y="245" font-family="Arial" font-size="12" fill="#01579b" text-anchor="middle">Synthetic Chain-of-Thought</text>
            
            <rect x="50" y="300" width="240" height="80" fill="#e1f5fe" stroke="#0288d1" stroke-width="1.5" rx="3" ry="3"/>
            <text x="170" y="325" font-family="Arial" font-size="14" fill="#01579b" text-anchor="middle">Trajectory Evaluation</text>
            <text x="170" y="345" font-family="Arial" font-size="14" fill="#01579b" text-anchor="middle">& Selection</text>
            <text x="170" y="365" font-family="Arial" font-size="12" fill="#01579b" text-anchor="middle">Quality Assessment</text>
            
            <rect x="50" y="420" width="240" height="80" fill="#e1f5fe" stroke="#0288d1" stroke-width="1.5" rx="3" ry="3"/>
            <text x="170" y="445" font-family="Arial" font-size="14" fill="#01579b" text-anchor="middle">Model Fine-Tuning</text>
            <text x="170" y="465" font-family="Arial" font-size="14" fill="#01579b" text-anchor="middle">Optimize Reasoning</text>
            
            <!-- Stage 1 arrows -->
            <line x1="170" y1="140" x2="170" y2="180" stroke="#333" stroke-width="2"/>
            <polygon points="170,180 165,170 175,170" fill="#333"/>
            
            <line x1="170" y1="260" x2="170" y2="300" stroke="#333" stroke-width="2"/>
            <polygon points="170,300 165,290 175,290" fill="#333"/>
            
            <line x1="170" y1="380" x2="170" y2="420" stroke="#333" stroke-width="2"/>
            <polygon points="170,420 165,410 175,410" fill="#333"/>
            
            <!-- Stage 2 container -->
            <rect x="400" y="20" width="580" height="460" fill="#f9f9f9" stroke="#333" stroke-width="2" rx="5" ry="5"/>
            <text x="690" y="45" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle">Stage 2: Reinforcement Learning</text>
            
            <!-- Stage 2 boxes -->
            <rect x="560" y="70" width="240" height="60" fill="#e1f5fe" stroke="#0288d1" stroke-width="1.5" rx="3" ry="3"/>
            <text x="680" y="105" font-family="Arial" font-size="14" fill="#01579b" text-anchor="middle">Event-Driven RL Environment</text>
            
            <rect x="560" y="170" width="240" height="60" fill="#e1f5fe" stroke="#0288d1" stroke-width="1.5" rx="3" ry="3"/>
            <text x="680" y="205" font-family="Arial" font-size="14" fill="#01579b" text-anchor="middle">PPO/GRPO Training</text>
            
            <!-- Reward Functions container -->
            <rect x="460" y="270" width="460" height="110" fill="#fff8e1" stroke="#ffa000" stroke-width="1.5" rx="3" ry="3"/>
            <text x="690" y="295" font-family="Arial" font-size="16" fill="#ff6f00" text-anchor="middle" font-weight="bold">Reward Functions</text>
            
            <!-- Reward boxes -->
            <rect x="475" y="310" width="135" height="50" fill="#fff8e1" stroke="#ffa000" stroke-width="1" rx="3" ry="3"/>
            <text x="543" y="340" font-family="Arial" font-size="14" fill="#ff6f00" text-anchor="middle">Format Reward</text>
            
            <rect x="630" y="310" width="135" height="50" fill="#fff8e1" stroke="#ffa000" stroke-width="1" rx="3" ry="3"/>
            <text x="698" y="340" font-family="Arial" font-size="14" fill="#ff6f00" text-anchor="middle">Return Reward</text>
            
            <rect x="785" y="310" width="135" height="50" fill="#fff8e1" stroke="#ffa000" stroke-width="1" rx="3" ry="3"/>
            <text x="853" y="340" font-family="Arial" font-size="14" fill="#ff6f00" text-anchor="middle">Risk-Adjusted</text>
            
            <!-- Output box -->
            <rect x="560" y="420" width="240" height="60" fill="#e1f5fe" stroke="#0288d1" stroke-width="1.5" rx="3" ry="3"/>
            <text x="680" y="455" font-family="Arial" font-size="14" fill="#01579b" text-anchor="middle">Trading Decision Output</text>
            
            <!-- Stage 2 arrows and connections -->
            <line x1="680" y1="130" x2="680" y2="170" stroke="#333" stroke-width="2"/>
            <polygon points="680,170 675,160 685,160" fill="#333"/>
            
            <line x1="680" y1="230" x2="680" y2="270" stroke="#333" stroke-width="2"/>
            <polygon points="680,270 675,260 685,260" fill="#333"/>
            
            <line x1="690" y1="380" x2="690" y2="420" stroke="#333" stroke-width="2"/>
            <polygon points="690,420 685,410 695,410" fill="#333"/>
            
            <!-- Connection between stages - single arrow -->
            <line x1="320" y1="250" x2="400" y2="250" stroke="#333" stroke-width="3"/>
            <polygon points="400,250 390,245 390,255" fill="#333"/>
        </svg>
    </div>
    
    <div class="description">
        <h2>Model Architecture Description</h2>
        <p>This diagram illustrates a two-stage approach to developing a trading model:</p>
        
        <h3>Stage 1: Supervised Fine-Tuning</h3>
        <p>The first stage focuses on generating and selecting high-quality reasoning trajectories:</p>
        <ul>
            <li><strong>Data Collection</strong>: Gathering data from GIR, market sources, and news</li>
            <li><strong>Reasoning Trajectory Generation</strong>: Creating synthetic chain-of-thought reasoning paths</li>
            <li><strong>Trajectory Evaluation & Selection</strong>: Assessing the quality of different reasoning approaches</li>
            <li><strong>Model Fine-Tuning</strong>: Optimizing the model to follow effective reasoning patterns</li>
        </ul>
        
        <h3>Stage 2: Reinforcement Learning</h3>
        <p>The second stage implements reinforcement learning to optimize trading decisions:</p>
        <ul>
            <li><strong>Event-Driven RL Environment</strong>: A simulation environment that reacts to market events</li>
            <li><strong>PPO/GRPO Training</strong>: Training the model using Proximal Policy Optimization or Guided Policy Optimization</li>
            <li><strong>Reward Functions</strong>:
                <ul>
                    <li>Format Reward: Evaluating the structure and format of decisions</li>
                    <li>Return Reward: Measuring financial returns from decisions</li>
                    <li>Risk-Adjusted Reward: Accounting for risk in performance evaluation</li>
                </ul>
            </li>
            <li><strong>Trading Decision Output</strong>: Final trading actions derived from the model</li>
        </ul>
    </div>
    
    <div class="footer">
        <p>Created on February 28, 2025</p>
    </div>
</body>
</html>